!function(a){"use strict";function b(a,b){for(var c in b)a[c]||(a[c]=b[c]);return a}function c(a,b,c,d){a&&"function"==typeof a[b]&&a[b].apply(c||window,d)}function d(a){return a.requestKey||a.url}function e(a){this.config={},this.activeRequests={},this.setup(b(a||{}),g)}var f=a.JQueryHttp,g={defaultParams:null,isMockMode:!1,mockRoot:"",serverRoot:"",apiRoot:""},h=function(a){var c,d,e,f=this.config.serverRoot,g=this.config.apiRoot,h=this.config.mockRoot;if(a=a||{},a.noDefaultParams||(a.params=b(a.params||{},this.config.defaultParams)),a.mock&&this.config.isMockMode)c=(h||"")+a.mock+(a.mock.indexOf(".json")>=0?"":".json");else{d=a.route,e=[];for(var i in a.params)a.params.hasOwnProperty(i)&&(d.indexOf(":"+i)>=0?d=d.replace(":"+i,a.params[i]):e.push(i+"="+a.params[i]));c=(f||"")+(g||"")+d+(e.length>0?"?"+e.join("&"):"")}return c},i=function(a){var e=this;return"object"==typeof a.url&&(a.url=this.url(a.url)),a.requestKey&&this.abortRequest(a.requestKey),this.config.isMockMode&&(a.method="GET"),new Promise(function(f,g){var h=b({complete:function(){a.requestKey&&e.activeRequests[a.requestKey]&&delete e.activeRequests[a.requestKey],c(a,"complete",a.context||e,arguments)},success:function(){c(a,"success",a.context||e,arguments),f.apply(this,arguments)},error:function(){c(a,"error",a.context||e,arguments),g.apply(this,arguments)}},a),i=$.ajax(h);e.activeRequests[d(a)]=i})};e.prototype.setup=function(a){for(var b in a)a.hasOwnProperty(b)&&(this.config[b]=a[b])},e.prototype.url=function(a,b,c){return"object"==typeof a?h.apply(this,arguments):h.call(this,{route:a,params:b,mock:c})},e.prototype.request=function(a,c,d,e,f){return"object"==typeof a?i.apply(this,arguments):i.call(this,b({url:{route:c,params:d},method:a,data:e},f))},e.prototype.abortRequest=function(a){this.activeRequests&&this.activeRequests[a]&&(this.activeRequests[a].abort(),this.activeRequests[a]=void 0)},e.noConflict=function(){return a.JQueryHttp=f,e},"undefined"!=typeof exports?exports=e:a.JQueryHttp=e}(this);