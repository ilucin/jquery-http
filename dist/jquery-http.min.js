!function(){"use strict";function a(a){for(var b in a)h[b]=a[b]}function b(a){var b,c,d;if(a=a||{},a.noDefaultParams||(a.params=f.defaults(a.params||{},h.defaultParams)),a.mock&&h.isMockMode)b=h.mockRoot+"/"+a.mock+(a.mock.indexOf(".json")>=0?"":".json");else{c=a.route,d=[];for(var e in a.params)c.indexOf(":"+e)>=0?c=c.replace(":"+e,a.params[e]):d.push(e+"="+a.params[e]);b=h.serverRoot+h.apiRoot+"/"+c+(d.length>0?"?"+d.join("&"):"")}return b}function c(a){return a.requestKey||a.url}function d(a){return"object"==typeof a.url&&(a.url=b(a.url)),a.requestKey&&e(a.requestKey),h.isMockMode&&(a.method="GET"),new Promise(function(b,d){var e=$.ajax(f.defaults({complete:function(){a.requestKey&&g[a.requestKey]&&delete g[a.requestKey],a.complete&&a.complete.apply(a.context||this,arguments)},success:b,error:d},a));g[c(a)]=e})}function e(a){g&&g[a]&&(console.log("Aborting request with same key:",a),g[a].abort(),g[a]=void 0)}var f={defaults:function(a,b){for(var c in b)a[c]||(a[c]=b[c]);return a}},g={},h={defaultParams:null,isMockMode:!1,mockRoot:"",serverRoot:"",apiRoot:""},i=function(a,b,c,e){return 1===arguments.length?d.apply(this,arguments):d.call(this,{url:{route:b,params:c},method:a,data:e})},j=function(a,c,d){return 1===arguments.length?b.apply(this,arguments):b.call(this,{route:a,params:c,mock:d})},k={setup:a,url:j,request:i,abortRequest:e};"function"==typeof window.define?window.define(function(){return k}):window.http=k}();